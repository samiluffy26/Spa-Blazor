@inject NavigationManager Navigation
@using Microsoft.AspNetCore.Components.Authorization
@code {
    [CascadingParameter] private Task<AuthenticationState> AuthState { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthState;
        if (authState?.User?.Identity is null || !authState.User.Identity.IsAuthenticated)
        {
            var returnUrl = Navigation.Uri;
             // Unified login path
             Navigation.NavigateTo($"login?returnUrl={Uri.EscapeDataString(returnUrl)}");
        }
    }
    
    // Simple helper class or logic
    private static class Data {
        public static bool IsAdminPath(string url) => url.Contains("/admin") && !url.Contains("/login");
    }
}
